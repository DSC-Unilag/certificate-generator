<!DOCTYPE html>
<html  >
<head>
  <!-- Site made with Mobirise Website Builder v4.10.3, https://mobirise.com -->
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Mobirise v4.10.3, mobirise.com">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
  <link rel="shortcut icon" href="assets/images/png-image-224224-pixels-128x128.png" type="image/x-icon">
  <meta name="description" content="">

  <title>DSC Unilag Certificate Generator</title>
  <link rel="stylesheet" href="assets/web/assets/mobirise-icons-bold/mobirise-icons-bold.css">
  <link rel="stylesheet" href="assets/tether/tether.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-grid.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-reboot.min.css">
  <link rel="stylesheet" href="assets/theme/css/style.css">
  <link rel="stylesheet" href="assets/mobirise/css/mbr-additional.css" type="text/css">
  <style>
  #test
{
  position: absolute;
  visibility: hidden;
  height: auto;
  width: auto;
  white-space: nowrap;
}
  </style>



</head>
<body>
  <section class="mbr-section content4 cid-rAtfCJr4hv" id="content4-4">



    <div class="container">
        <div class="media-container-row">
            <div class="title col-12 col-md-8">
                <h2 class="align-center pb-3 mbr-fonts-style display-2"><strong>Project "<span id="event_name">{}</span>" Editor</strong></h2>
                <h3 class="mbr-section-subtitle align-center mbr-light mbr-fonts-style display-5">
                    Select points where you want your text to appear, Your SpreadSheet has <span id="num_cols">{}</span> column<span id="s">s</span>.</h3>
                    <br>
                    <br>

            </div>
        </div>
    </div>
</section>

<section class="engine"><a href="https://mobirise.info/r">bootstrap templates</a></section><section class="header3 cid-rB29fqjk55" id="header3-e" style="background-color:#fff">





    <div class="container">
        <div class="media-container-row">
            <div class="media-content" style="border: 2px solid; flex-basis: 50%; padding-right:10px; padding-left:10px">
                <h3 class="mbr-section-title pb-3 mbr-fonts-style" align="center">
                    Template Element Options
                </h3>
                <input type="hidden" id="ratio" value="">
                <input type="hidden" id="t">
                <input type="hidden" id="elementsDrawn" value="0">
                <div>
                <div id="tools_menu">
                <div class="mbr-form form-with-styler menu_element" id="img_element">
                  <div class="dragArea row">
                      <div class="form-group col" style="text-align:center">
                          Template Data Source
                          <input type="text" class="form-control display-7" style="border-radius: 100px !important;" id="img_element_data" disabled>
                      </div>
                  </div>
                  <div class="dragArea row">
                      <div class="form-group col" style="text-align:center">
                          Template Name
                          <input type="text" class="form-control display-7" style="border-radius: 100px !important;" id="img_element_name" disabled>
                      </div>
                  </div>
                    <div class="dragArea row">
                        <div class="form-group col" style="text-align:center">
                            Template Image Width
                            <input type="text" class="form-control display-7" style="border-radius: 100px !important;" id="img_element_width" disabled>
                        </div>
                    </div>
                    <div class="dragArea row">
                        <div class="form-group col" style="text-align:center">
                            Template Image Height
                            <input type="text" class="form-control display-7" style="border-radius: 100px !important;" id="img_element_height" disabled>
                        </div>
                    </div>
                </div>
                </div>
              </div>
            </div>
            <div style="padding-right:10px">
            </div>
            <div class="mbr-figure" style="width: 100%;" id="canvspot">
                <img src="assets/images/certificate-sample-975x675.jpg" alt="Mobirise" title="" id="template" style="border: 2px solid">
            </div>
        </div>
    </div>

</section>

<section class="mbr-section form3 cid-rAtglAQBAT" id="form3-5">





    <div class="container">
        <div class="row justify-content-center">
            <div class="title col-12 col-lg-8">


            </div>
        </div>

        <!--<div class="row py-2 justify-content-center">
            <div class="col-12 col-lg-6  col-md-8 " data-form-type="formoid">

                <div class="mbr-form form-with-styler" data-form-title="Mobirise Form">
                    <div class="dragArea row">
                        <div class="form-group col" data-for="num_static">

                            <input type="number" name="num_static" placeholder="Number of Static Data" data-form-field="num_static" required="required" class="form-control display-7" id="num_static" style="border-radius: 100px !important;" min="0">
                        </div>
                        <div class="col-auto input-group-btn"><button type="submit" class="btn btn-primary display-4" onclick="add_static()">APPLY</button></div>
                    </div>
                </div>
            </div>-->
        </div>
    </div>
</section>

<section class="mbr-section content8 cid-rAvFM09fCL" id="content8-b">



    <div class="container">
        <div class="media-container-row title">
            <div class="col-12 col-md-8" style="border-radius: 100px !important;">
                <div class="mbr-section-btn align-center"><a class="btn btn-primary display-4" onclick="finish()"><span class="mbrib-setting mbr-iconfont mbr-iconfont-btn"></span>PROCEED</a></div>
            </div>
        </div>
    </div>
</section>

<section once="footers" class="cid-rAtgBHsVC5" id="footer6-6">





    <div class="container">
        <div class="media-container-row align-center mbr-white">
            <div class="col-12">
                <p class="mbr-text mb-0 mbr-fonts-style display-7"><strong>
                    <a href="https://github.com/LordGhostX" target="_blank">Â© Copyright 2019 LordGhostX - All Rights Reserved</a>
                </strong></p>
            </div>
        </div>
    </div>
</section>

  <script src="assets/web/assets/jquery/jquery.min.js"></script>
  <script src="assets/popper/popper.min.js"></script>
  <script src="assets/tether/tether.min.js"></script>
  <script src="assets/bootstrap/js/bootstrap.min.js"></script>
  <script src="assets/smoothscroll/smooth-scroll.js"></script>
  <script src="assets/theme/js/script.js"></script>
  <script src="eel.js"></script>
  <script>
  function hider(id) {
    var menu = document.getElementsByClassName("menu_element");
    for (var i = 0; i < menu.length; i++) {
      menu[i].hidden = true;
    }
    document.getElementById(id).hidden = false;
  }
  (async function() {
    var _ = await eel.setupEditor()();
    if (_) {
        document.getElementById("event_name").innerHTML = _[0];
        document.getElementById("template").src = _[1][0];
        document.getElementById("img_element_name").value = _[3];
        document.getElementById("img_element_data").value = _[4];
        document.getElementById("img_element_width").value = _[1][1] + "px";
        document.getElementById("img_element_height").value = _[1][2] + "px";
        document.getElementById("num_cols").innerHTML = _[2].length;
        document.getElementById("num_cols").valdata = _[2].length;

        if (_[2].length <= 1) {
          document.getElementById("s").innerHTML = "";
        }

        var width = document.getElementById("template").clientWidth;
        var ratio = parseFloat(_[1][1]) / parseFloat(width);
        document.getElementById("ratio").value = ratio;
    }
  })();

  function startupCanvas() {
    var t = document.getElementById("t");
    var template_element = document.getElementById("template");
    t.widthval = template_element.clientWidth;
    t.heightval = template_element.clientHeight;
    template_element.hidden = true;
    document.getElementById("canvspot").innerHTML += '<canvas id="myCanvas" style="border: 2px solid" width="' + t.widthval + '" height="' + t.heightval + '"></canvas><br><br>';


    document.getElementById("myCanvas").addEventListener("click", function (evt) {
      var mousePos = getMousePos(document.getElementById("myCanvas"), evt);
      var candraw = drawElem(mousePos.x, mousePos.y);
      if (candraw) {
        generateCanvas();
      }
  }, false);
  }

  //Get Mouse Position
  function getMousePos(canvas, evt) {
    var rect = canvas.getBoundingClientRect();
    return {
        x: evt.clientX - rect.left,
        y: evt.clientY - rect.top
    };
}

  function generateCanvas() {
    var template_element = document.getElementById("template");
    var img = new Image;
    img.src = template_element.src;
    var canvas_element = document.getElementById("myCanvas");
    var ctx = canvas_element.getContext("2d");
    ctx.clearRect(0, 0, canvas_element.width, canvas_element.height);
    ctx.drawImage(img, 0, 0, canvas_element.width, canvas_element.height);
    var menu = document.getElementsByClassName("menu_element_2");

    for (var i = 0; i < menu.length; i++) {
      ctx.font = (parseFloat(document.getElementById("font_size_" + (i + 1)).value) / parseFloat(document.getElementById("ratio").value)) + "px Arial";
      ctx.fillStyle = document.getElementById("font_color_" + (i + 1)).value;
      var x = document.getElementById("location_x_" + (i + 1)).value;
      var y = document.getElementById("location_y_" + (i + 1)).value;
      ctx.fillText(document.getElementById("sample_text_" + (i + 1)).value, x, y);
    }
  }

  function drawElem(x, y) {
    if (parseInt(document.getElementById("elementsDrawn").value) < parseInt(document.getElementById("num_cols").innerHTML)) {
      document.getElementById("elementsDrawn").value = parseInt(document.getElementById("elementsDrawn").value) + 1;
      var id_ = parseInt(document.getElementById("elementsDrawn").value);
      var id = "img_elem_" + id_;

      var tools = document.createElement("div");
      tools.id = id;
      tools.className= "mbr-form form-with-styler menu_element menu_element_2";
      tools.innerHTML = "<div class='mbr-form form-with-styler'><div class='dragArea row'>        <div class='form-group col' style='text-align:center'> Sample Text   <input type='text' class='form-control display-7' style='border-radius: 100px !important; text-align:center' id='sample_text_" + id_ + "' value='Sample Text' onchange='generateCanvas()'>		</div>    </div>	<div class='dragArea row'>        <div class='form-group col' style='text-align:center'> Align Center <select onchange='generateCanvas()' class='form-control display-7' style='border-radius: 100px !important; text-align:center' id='align_center_" + id_ + "'> <option value='no'>No</option> <option value='yes'>Yes</option></select></div>    </div> <div class='dragArea row'>        <div class='form-group col' style='text-align:center'> Font Color            <input type='color' class='form-control display-7' onchange='generateCanvas()' style='border-radius: 100px !important;' id='font_color_" + id_ + "' value='#000000'> </div>    </div> <div class='dragArea row'>        <div class='form-group col' style='text-align:center'> Font Size            <input onchange='generateCanvas()' type='number' class='form-control display-7' style='border-radius: 100px !important; text-align:center' id='font_size_" + id_ + "' value='50'> </div>    </div>	<div class='dragArea row'>        <div class='form-group col' style='text-align:center' onchange='generateCanvas()'> Location X <input min='0' type='number' class='form-control display-7' style='border-radius: 100px !important; text-align:center' id='location_x_" + id_ + "' value='" + x + "'> </div>        <div class='form-group col' style='text-align:center'> Location Y <input onchange='generateCanvas()' min='0' type='number' class='form-control display-7' style='border-radius: 100px !important; text-align:center' id='location_y_" + id_ + "' value='" + y + "'> </div>    </div></div>";
      document.getElementById("tools_menu").insertBefore(tools, document.getElementById("tools_menu").childNodes[0]);
      hider(id);
      return true;
    }
    document.getElementById("myCanvas").removeEventListener("click", function (evt) {}, false);
    return false;
  }

  function caller() {
    if (document.getElementById("ratio").value == "") {
      clearInterval(interval);
      interval = setInterval(caller, 300);
    }
    else {
      clearInterval(interval);
      startupCanvas();
      generateCanvas();
    }
  }
  var interval = setInterval(caller, 300);
  async function finish() {
    var menu = document.getElementsByClassName("menu_element_2");
    if (menu.length < parseInt(document.getElementById("num_cols").innerHTML)) {
      alert("You haven't filled all points yet!");
      return;
    }
    var elements = [];
    for (var i = 0; i < menu.length; i++) {
      elements.push({"align_center": document.getElementById("align_center_" + (i + 1)).value == "yes", "font_color": document.getElementById("font_color_" + (i + 1)).value, "font_size": document.getElementById("font_size_" + (i + 1)).value, "location_x": document.getElementById("location_x_" + (i + 1)).value, "location_y": document.getElementById("location_y_" + (i + 1)).value});
    }

          var paths = await eel.saveTrans(elements)();
          if (paths) {
              window.location = "options.html";
          }
  }
  </script>

</body>
</html>
